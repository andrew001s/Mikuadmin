@using Protov4.DTO;
@{
    Layout = "~/Views/Administrador/_LayoutAdmin.cshtml";
}
@model List<ProductoDTO>
<div>
    <h1>Lista de productos</h1>
</div>
<div>
    <button class="btn btn-secondary" id="crearProductoBtn">Crear Nuevo</button>
</div>
<div>

    <table>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Imagen</th>
            <th>Marca</th>
            <th>Existencias</th>
            <th>Tipo</th>
        </tr>


        @for (int i = 0; i < Model.Count; i++)
        {
            var carr = Model[i];
            byte[] imagenBytes = carr.Imagen;
            string base64 = "data:image/png;base64," + Convert.ToBase64String(imagenBytes);
            <tr>
                <td> @carr.Id</td>
                <td> @carr.Nombre_Producto</td>
                <td> $ @carr.Precio</td>
                <td><img src="@base64" width="200" height="200"> </td>
                <td>@carr.Marca </td>
                <td>@carr.Existencia </td>
                <td>@carr.Tipo </td>
            </tr>
        }
    </table>

</div>

<script>
    document.getElementById("crearProductoBtn").addEventListener("click", function () {
        Swal.fire({
            title: 'Crear Nuevo Producto',
            text: 'Quieres crear un nuevo Producto?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {
                // Redirect to the "CrearNuevoProducto" action
                window.location.href = "@Url.Action("CrearNuevoProducto", "Administrador")";
            }
        });
    });
</script>